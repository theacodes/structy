import structy

class {{struct.name}}(structy.Struct):
    _PACK_STRING = "{{pack_string}}"
    _PACK_FIELDS = [
{% for field in struct.fields: %}
        "{{field.name}}",
{% endfor %}
    ]

    PACKED_SIZE = {{packed_size}}
    """The total size of the struct once packed."""

    def __init__(self, **kwargs):
{% for field in struct.fields: %}

        self.{{field.name}}: {{field.kind.py_type}} = kwargs.pop("{{field.name}}", {{field.kind.py_value(field.value)}})
{% if field.docstring %}
        """{{field.docstring|indent()}}"""
{% endif %}
{% endfor %}